

## íŒŒì´ì¬ ë²½ ë¶€ìˆ˜ê³  ì´ë™í•˜ê¸°(BOJ 2206)

<br>

## ë¬¸ì œ

NÃ—Mì˜ í–‰ë ¬ë¡œ í‘œí˜„ë˜ëŠ” ë§µì´ ìˆë‹¤. ë§µì—ì„œ 0ì€ ì´ë™í•  ìˆ˜ ìˆëŠ” ê³³ì„ ë‚˜íƒ€ë‚´ê³ , 1ì€ ì´ë™í•  ìˆ˜ ì—†ëŠ” ë²½ì´ ìˆëŠ” ê³³ì„ ë‚˜íƒ€ë‚¸ë‹¤. ë‹¹ì‹ ì€ (1, 1)ì—ì„œ (N, M)ì˜ ìœ„ì¹˜ê¹Œì§€ ì´ë™í•˜ë ¤ í•˜ëŠ”ë°, ì´ë•Œ ìµœë‹¨ ê²½ë¡œë¡œ ì´ë™í•˜ë ¤ í•œë‹¤. ìµœë‹¨ê²½ë¡œëŠ” ë§µì—ì„œ ê°€ì¥ ì ì€ ê°œìˆ˜ì˜ ì¹¸ì„ ì§€ë‚˜ëŠ” ê²½ë¡œë¥¼ ë§í•˜ëŠ”ë°, ì´ë•Œ ì‹œì‘í•˜ëŠ” ì¹¸ê³¼ ëë‚˜ëŠ” ì¹¸ë„ í¬í•¨í•´ì„œ ì„¼ë‹¤.

ë§Œì•½ì— ì´ë™í•˜ëŠ” ë„ì¤‘ì— í•œ ê°œì˜ ë²½ì„ ë¶€ìˆ˜ê³  ì´ë™í•˜ëŠ” ê²ƒì´ ì¢€ ë” ê²½ë¡œê°€ ì§§ì•„ì§„ë‹¤ë©´, ë²½ì„ í•œ ê°œ ê¹Œì§€ ë¶€ìˆ˜ê³  ì´ë™í•˜ì—¬ë„ ëœë‹¤.

í•œ ì¹¸ì—ì„œ ì´ë™í•  ìˆ˜ ìˆëŠ” ì¹¸ì€ ìƒí•˜ì¢Œìš°ë¡œ ì¸ì ‘í•œ ì¹¸ì´ë‹¤.

ë§µì´ ì£¼ì–´ì¡Œì„ ë•Œ, ìµœë‹¨ ê²½ë¡œë¥¼ êµ¬í•´ ë‚´ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ì‹œì˜¤.

<br>

## ì…ë ¥

ì²«ì§¸ ì¤„ì— N(1 â‰¤ N â‰¤ 1,000), M(1 â‰¤ M â‰¤ 1,000)ì´ ì£¼ì–´ì§„ë‹¤. ë‹¤ìŒ Nê°œì˜ ì¤„ì— Mê°œì˜ ìˆ«ìë¡œ ë§µì´ ì£¼ì–´ì§„ë‹¤. (1, 1)ê³¼ (N, M)ì€ í•­ìƒ 0ì´ë¼ê³  ê°€ì •í•˜ì.

<br>

## ì¶œë ¥

ì²«ì§¸ ì¤„ì— ìµœë‹¨ ê±°ë¦¬ë¥¼ ì¶œë ¥í•œë‹¤. ë¶ˆê°€ëŠ¥í•  ë•ŒëŠ” -1ì„ ì¶œë ¥í•œë‹¤.

<br>

## ì˜ˆì œ ì…ë ¥ 1 

```
6 4
0100
1110
1000
0000
0111
0000
```

## ì˜ˆì œ ì¶œë ¥ 1 

```
15
```

## ì˜ˆì œ ì…ë ¥ 2 

```
4 4
0111
1111
1111
1110
```

## ì˜ˆì œ ì¶œë ¥ 2 

```
-1
```

<br>

## ğŸ“ í’€ì–´ë³´ê¸° 

N(ì„¸ë¡œ), M(ê°€ë¡œ)ê¸¸ì´ë¥¼ ì…ë ¥ë°›ëŠ”ë‹¤.

ìˆ«ìë¡œ ëœ ë§µì„ Nì¤„ì— ê±¸ì³ì„œ ì…ë ¥ë°›ì•„ graphì— ì €ì¥í•œë‹¤.

visitedì— [0]*2 ë¥¼ Mê°œë§Œí¼, Nì¤„ì— ê±¸ì³ì„œ ì €ì¥í•œë‹¤.

visitedê°€ ì´ë ‡ê²Œ 3ì°¨ì› í˜•íƒœì˜ ë¦¬ìŠ¤íŠ¸ê°€ ë˜ëŠ” ì´ìœ ëŠ” ë²½ì„ ë¶€ìˆ˜ê³  ì´ë™í•˜ê¸° ìœ„í•œ ì¹´ìš´íŠ¸ ë•Œë¬¸ì´ë‹¤.

`visited[x][y][0]`ì—ëŠ” í•´ë‹¹ ì¢Œí‘œì˜ ë°©ë¬¸ ì—¬ë¶€ë¥¼, `visited[x][y][1]`ì—ëŠ” ë‚¨ì€ ë²½ ë¶€ìˆ˜ê¸° ì¹´ìš´íŠ¸ë¥¼ ì €ì¥í•œë‹¤.

dx, dyì—ëŠ” ì•, ë’¤, ì¢Œ, ìš° 4ê°€ì§€ ë°©ìœ„ë¥¼ ì²´í¬í•˜ê¸° ìœ„í•œ ê°’ì„ ë„£ì–´ë‘”ë‹¤.

``` python
import sys
from collections import deque
from pprint import pprint
input = sys.stdin.readline


N, M = map(int, input().split())
graph = [list(map(int, input().rstrip())) for _ in range(N)]
visited = [[[0] * 2 for _ in range(M)] for _ in range(N)]
dx = [0, 0, 1, -1]
dy = [1, -1, 0, 0]
```

<br>

í•¨ìˆ˜ BFSë¥¼ ì •ì˜í•œë‹¤. ì¸ìëŠ” ì‹œì‘ì§€ì ì˜ ì¢Œí‘œ x, yì™€ ë¸”ëŸ­ì„ ë¶€ìˆ  ìˆ˜ ìˆëŠ” ì¹´ìš´íŠ¸ cntë‹¤.

deque Qì— ì‹œì‘ì ì˜ ì¢Œí‘œì™€ ì¹´ìš´íŠ¸ë¥¼ ì‚½ì…í•˜ê³ , í•´ë‹¹ ì§€ì ì„ ë°©ë¬¸ì²˜ë¦¬í•œë‹¤.

Qì—ì„œ ì¢Œí‘œì™€ ì¹´ìš´íŠ¸ë¥¼ êº¼ë‚´, x, y, cntì— ê°ê° ì €ì¥í•œë‹¤.

ë§Œì•½ xì™€ yê°€ graphì˜ ëª©í‘œ ì¢Œí‘œì— ë„ë‹¬í•˜ë©´ `visited[x][y][cnt]`ë¥¼ ë¦¬í„´í•´ì¤€ë‹¤.

ì•, ë’¤, ì¢Œ, ìš°ë¥¼ íƒìƒ‰í•˜ë©´ì„œ í•´ë‹¹ ë²”ìœ„ë¥¼ ë„˜ìœ¼ë©´ ê±´ë„ˆë›´ë‹¤.

ê·¸ë˜í”„ì˜ ë°©ë¬¸í•˜ì§€ ì•Šì€ ì¢Œí‘œê°€ ìˆê³ , ë²½ì„ ë¶€ìˆ˜ì§€ ì•Šê³  ì´ë™í•´ë„ ë˜ëŠ” ì¢Œí‘œê°€ ìˆìœ¼ë©´ Qì— í•´ë‹¹ ì¢Œí‘œê°’ê³¼ ì¹´ìš´íŠ¸ë¥¼ ì§‘ì–´ë„£ê³  visitedì˜ í•´ë‹¹ ì¢Œí‘œì— ì´ì „ ê°’ +1ì„ ì €ì¥í•œë‹¤.

ê·¸ë˜í”„ì˜ ì´ë™ê²½ë¡œì— ë²½ì´ ìˆê³ (1) ì¹´ìš´íŠ¸ê°€ ë‚¨ì•„ìˆë‹¤ë©´ í•´ë‹¹ ì¢Œí‘œì™€ ì¹´ìš´íŠ¸ë¥¼ -1 í•œ ê°’ì„ Qì— ì €ì¥í•œë‹¤.

í•´ë‹¹ìœ„ì¹˜ì™€ cnt-1ì— ì´ì „ ê°’ +1ì„ ì €ì¥í•œë‹¤.

ê·¸ì™¸ì—” ì´ë™í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ -1ì„ ë¦¬í„´í•œë‹¤.  

``` python
# ì‹œì‘ì§€ì ì˜ ì¢Œí‘œ x, y, cnt
def BFS(x, y, cnt):
    Q = deque([[x, y, cnt]])
    visited[x][y][cnt] = 1
    while Q:
        x, y, cnt = Q.popleft()
        if x == N-1 and y == M-1:
            return visited[x][y][cnt]
        for i in range(4):
            nx = x + dx[i]
            ny = y + dy[i]
            if nx < 0 or nx >= N or ny < 0 or ny >= M:
                continue
            # ë²½ì„ ë¶€ìˆ˜ì§€ ì•Šê³  ì´ë™í•˜ê¸°
            if graph[nx][ny] == 0 and visited[nx][ny][cnt] == 0:
                Q.append([nx, ny, cnt])
                visited[nx][ny][cnt] = visited[x][y][cnt] + 1
            # ë²½ì„ ë¶€ìˆœë‹¤
            if graph[nx][ny] == 1 and cnt == 1:
                Q.append([nx, ny, cnt-1])
                visited[nx][ny][cnt-1] = visited[x][y][cnt] + 1
    return -1


```

<br>

#### ì „ì²´ì½”ë“œ

``` python
import sys
from collections import deque
from pprint import pprint
input = sys.stdin.readline


N, M = map(int, input().split())
graph = [list(map(int, input().rstrip())) for _ in range(N)]
visited = [[[0] * 2 for _ in range(M)] for _ in range(N)]
dx = [0, 0, 1, -1]
dy = [1, -1, 0, 0]

# ì‹œì‘ì§€ì ì˜ ì¢Œí‘œ x, y, cnt
def BFS(x, y, cnt):
    Q = deque([[0, 0, 1]])
    visited[x][y][cnt] = 1
    while Q:
        x, y, cnt = Q.popleft()
        if x == N-1 and y == M-1:
            return visited[x][y][cnt]
        for i in range(4):
            nx = x + dx[i]
            ny = y + dy[i]
            if nx < 0 or nx >= N or ny < 0 or ny >= M:
                continue
            # ë²½ì„ ë¶€ìˆ˜ì§€ ì•Šê³  ì´ë™í•˜ê¸°
            if graph[nx][ny] == 0 and visited[nx][ny][cnt] == 0:
                Q.append([nx, ny, cnt])
                visited[nx][ny][cnt] = visited[x][y][cnt] + 1
            # ë²½ì„ ë¶€ìˆœë‹¤
            if graph[nx][ny] == 1 and cnt == 1:
                Q.append([nx, ny, cnt-1])
                visited[nx][ny][cnt-1] = visited[x][y][cnt] + 1
    return -1

# ì‹œì‘ì§€ì  x,yì¢Œí‘œì™€ ë‚¨ì€ ì¹´ìš´íŠ¸ 1
print(BFS(0, 0, 1))
```

<br>



